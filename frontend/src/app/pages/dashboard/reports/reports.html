<div class="container-fluid py-4">
    <app-db-page-header title="Safety & Reports" subtitle="Review and handle user and post reports." titleIcon="flag"
        iconColor="#fd7e14">
    </app-db-page-header>

    <!-- Filters -->
    <div class="d-flex flex-wrap gap-3 mb-4 align-items-center bg-white p-3 rounded-4 shadow-sm border">
        <div class="d-flex align-items-center gap-2">
            <span class="text-secondary small fw-bold text-uppercase opacity-50 me-2"
                style="letter-spacing: 0.05em;">Filter Status:</span>
            <div class="btn-group btn-group-sm p-1 bg-light rounded-pill">
                <button class="btn rounded-pill px-3" [class.btn-white.shadow-sm]="statusFilter() === 'PENDING'"
                    (click)="setStatusFilter('PENDING')">Queue</button>
                <button class="btn rounded-pill px-3" [class.btn-white.shadow-sm]="statusFilter() === 'RESOLVED'"
                    (click)="setStatusFilter('RESOLVED')">Resolved</button>
                <button class="btn rounded-pill px-3" [class.btn-white.shadow-sm]="statusFilter() === 'ALL'"
                    (click)="setStatusFilter('ALL')">All Reports</button>
            </div>
        </div>
    </div>

    <!-- Reports Grid -->
    <div class="vstack gap-3">
        <app-report-card *ngFor="let report of pagination.paginatedData()" [report]="report"
            (onAction)="handleReportAction($event)"
            (onViewTarget)="report.reportedPostId ? viewPost(report.reportedPostId) : null"></app-report-card>

        <app-db-feedback *ngIf="filteredReports().length === 0 && !isLoading()" type="empty" icon="flag"
            iconColor="#fd7e14" title="No reports yet" message="Everything is quiet. Communities are behaving well.">
        </app-db-feedback>

        <app-db-feedback *ngIf="isLoading()" type="loading"></app-db-feedback>
    </div>

    <!-- Footer & Pagination -->
    <app-db-pagination *ngIf="filteredReports().length > 0" [pagination]="pagination"
        [totalItems]="filteredReports().length" label="reports">
    </app-db-pagination>
</div>