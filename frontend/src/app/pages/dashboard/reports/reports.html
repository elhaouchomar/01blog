<div class="container-fluid py-4">
    <app-db-page-header title="Safety & Reports" subtitle="Review and handle user and post reports." titleIcon="flag"
        iconColor="#fd7e14">
    </app-db-page-header>

    <!-- Filters -->
    <div class="d-flex flex-wrap gap-3 mb-4 align-items-center bg-white p-3 rounded-4 shadow-sm border">
        <div class="d-flex align-items-center gap-2 flex-wrap">
            <span class="text-secondary small fw-bold text-uppercase me-2 d-none d-sm-inline"
                style="letter-spacing: 0.05em;">Filter Status:</span>
            <div class="btn-group btn-group-sm p-1 bg-light rounded-pill overflow-hidden border shadow-sm">
                <button class="btn rounded-pill px-3 transition-all"
                    [ngClass]="{'btn-pill-active': statusFilter() === 'PENDING', 'text-secondary': statusFilter() !== 'PENDING'}"
                    (click)="setStatusFilter('PENDING')" title="Queue">
                    <span class="material-symbols-outlined fs-5 d-block">inbox</span>
                </button>
                <button class="btn rounded-pill px-3 transition-all"
                    [ngClass]="{'btn-pill-active': statusFilter() === 'RESOLVED', 'text-secondary': statusFilter() !== 'RESOLVED'}"
                    (click)="setStatusFilter('RESOLVED')" title="Resolved">
                    <span class="material-symbols-outlined fs-5 d-block">check_circle</span>
                </button>
                <button class="btn rounded-pill px-3 transition-all"
                    [ngClass]="{'btn-pill-active': statusFilter() === 'ALL', 'text-secondary': statusFilter() !== 'ALL'}"
                    (click)="setStatusFilter('ALL')" title="All Reports">
                    <span class="material-symbols-outlined fs-5 d-block">filter_list</span>
                </button>
            </div>
        </div>
        <div class="ms-auto d-none d-md-block">
            <span class="badge rounded-pill bg-light border text-secondary px-3 py-2 fw-medium">
                Total Reports: {{ filteredReports().length }}
            </span>
        </div>
    </div>

    <!-- Reports Grid -->
    <div class="vstack gap-3">
        <app-report-card *ngFor="let report of filteredReports()" [report]="report"
            (onAction)="handleReportAction($event)" (onViewTarget)="handleView(report)"></app-report-card>

        <app-db-feedback *ngIf="filteredReports().length === 0 && !isLoading()" type="empty" icon="flag"
            iconColor="#fd7e14" title="No reports yet" message="Everything is quiet. Communities are behaving well.">
        </app-db-feedback>

        <app-db-feedback *ngIf="isLoading()" type="loading"></app-db-feedback>
    </div>
</div>