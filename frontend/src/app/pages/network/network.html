<div class="page-container">
    <app-navbar></app-navbar>

    <div class="content-wrapper">
        <!-- Left Sidebar -->
        <app-sidebar class="sidebar"></app-sidebar>

        <!-- Main Content -->
        <main class="main-feed">

            <!-- User Grid -->
            <div class="network-grid">
                <div *ngFor="let user of displayUsers()" class="network-user-card" (click)="navigateToProfile(user.id)"
                    style="cursor: pointer;">
                    <div class="card-action-overlay">
                        <button class="btn-action-round delete" *ngIf="isAdmin()"
                            (click)="deleteUser(user); $event.stopPropagation()">
                            <span class="material-symbols-outlined icon-small">person_remove</span>
                        </button>
                        <button class="btn-action-round close"
                            (click)="removeFromSuggestions(user); $event.stopPropagation()">
                            <span class="material-symbols-outlined icon-small">close</span>
                        </button>
                    </div>

                    <div class="network-avatar" *ngIf="user.avatar"
                        [style.background-image]="'url(' + user.avatar + ')'">
                    </div>
                    <div class="network-avatar avatar-initials" *ngIf="!user.avatar">
                        {{ getInitials(user.name) }}
                    </div>


                    <a [routerLink]="['/profile', user.id]" class="network-user-name">{{ user.name }}</a>

                    <p class="network-user-role">{{ user.role }}</p>

                    <div class="network-stats">
                        <span class="stat-item">{{ user.followersCount || 0 }} subscribers</span>
                        <span class="stat-item">{{ user.followingCount || 0 }} subscriptions</span>
                    </div>

                    <p class="network-user-bio" *ngIf="user.bio">{{ user.bio }}</p>
                    <p class="network-user-bio" *ngIf="!user.bio">Passionate about tech. Let's connect!</p>

                    <div class="network-actions">
                        <button (click)="toggleSubscribe(user); $event.stopPropagation()"
                            [class.subscribed]="user.isFollowing" class="btn-subscribe">
                            <span class="material-symbols-outlined icon-small">{{ user.isFollowing ? 'check' : 'add'
                                }}</span>
                            <span>{{ user.isFollowing ? 'Subscribed' : 'Subscribe' }}</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="empty-state-premium" *ngIf="!hasMoreUsers() && displayUsers().length > 0"
                style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                <span class="material-symbols-outlined fs-1 mb-2">groups</span>
                <p class="fw-bold">No more people to show.</p>
            </div>

            <!-- Load More -->
            <!-- <div class="load-more-container">
                <button class="btn-load-more-people">
                    Load more people
                    <span class="material-symbols-outlined icon-small">expand_more</span>
                </button>
            </div> -->
        </main>

        <!-- Right Sidebar (Trending) -->
        <app-right-sidebar class="sidebar"></app-right-sidebar>
    </div>
</div>
