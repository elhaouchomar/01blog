<!-- User List Section -->
<div class="flex flex-col gap-6">
    <!-- Actions & Filters -->
    <div class="admin-toolbar">
        <h2 class="text-xl font-bold text-text-main dark:text-white">User Management</h2>
        <div class="admin-search-bar">
            <span class="material-symbols-outlined text-gray-400">search</span>
            <input class="admin-search-input" placeholder="Search users..." type="text" [(ngModel)]="searchQuery"
                (input)="filterUsers()" />
        </div>
        <div class="flex gap-2">
            <button class="btn btn-primary" (click)="filterBy('All')">All</button>
            <button class="btn btn-secondary" (click)="filterBy('Banned')">Banned</button>
        </div>
    </div>

    <!-- Data Table -->
    <div class="admin-table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>User</th>
                    <th>Role</th>
                    <th>Status</th>
                    <th>Email</th>
                    <th class="text-right">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of paginatedUsers">
                    <td>
                        <div class="admin-user-info">
                            <div class="admin-avatar"
                                [style.background-image]="'url(' + (user.avatar || 'assets/default-avatar.png') + ')'">
                            </div>
                            <div>
                                <p class="font-bold text-text-main dark:text-white">{{ user.name }}</p>
                                <p class="text-xs text-text-secondary">{{ user.handle }}</p>
                            </div>
                        </div>
                    </td>
                    <td>
                        <span class="status-badge" [class.admin]="user.role === 'ADMIN'">{{ user.role }}</span>
                    </td>
                    <td>
                        <span class="status-badge" [class.active]="!user.isBanned" [class.banned]="user.isBanned">
                            {{ user.isBanned ? 'Banned' : 'Active' }}
                        </span>
                    </td>
                    <td>{{ user.email }}</td>
                    <td class="text-right">
                        <div class="action-btn-group">
                            <button class="action-btn-sm" (click)="toggleBan(user)" title="Ban/Unban">
                                <span class="material-symbols-outlined">{{ user.isBanned ? 'check_circle' : 'block'
                                    }}</span>
                            </button>
                            <button class="action-btn-sm danger" (click)="deleteUser(user)" title="Delete">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <div *ngIf="filteredUsers.length === 0" class="p-6 text-center text-text-secondary">
            No users found.
        </div>
    </div>

    <!-- Pagination -->
    <div class="table-footer" *ngIf="filteredUsers.length > 0">
        <p class="stats">Showing {{ (currentPage - 1) * itemsPerPage + 1 }} - {{
            Math.min(currentPage * itemsPerPage, filteredUsers.length) }} of {{
            filteredUsers.length }} users</p>
        <div class="pagination">
            <button class="btn-pager" [disabled]="currentPage === 1" (click)="prevPage()">
                <span class="material-symbols-outlined">chevron_left</span>
                Previous
            </button>
            <span class="page-indicator">Page {{ currentPage }} of {{ totalPages }}</span>
            <button class="btn-pager" [disabled]="currentPage === totalPages" (click)="nextPage()">
                Next
                <span class="material-symbols-outlined">chevron_right</span>
            </button>
        </div>
    </div>
</div>