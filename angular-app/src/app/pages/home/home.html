<div class="page-container">
    <app-navbar></app-navbar>

    <div class="content-wrapper">
        <!-- Sidebar -->
        <app-sidebar class="sidebar"></app-sidebar>

        <!-- Main Feed -->
        <main class="main-feed">
            <!-- Premium Create Post Widget -->
            <div class="create-post-card" *ngIf="dataService.currentUser()">
                <div class="widget-main">
                    <div class="user-avatar-premium"
                        [style.background-image]="'url(' + (dataService.currentUser()?.avatar || 'assets/default-avatar.png') + ')'">
                    </div>
                    <button class="widget-trigger-btn" (click)="modalService.open('create-post')">
                        <span class="placeholder-text">Share what you've learned today...</span>
                        <span class="material-symbols-outlined">edit_square</span>
                    </button>
                </div>
                <div class="widget-actions-grid">
                    <button class="action-item" (click)="modalService.open('create-post', {tab: 'media'})">
                        <div class="action-icon-bg media">
                            <span class="material-symbols-outlined">image</span>
                        </div>
                        <span class="action-label">Media</span>
                    </button>
                    <button class="action-item">
                        <div class="action-icon-bg event">
                            <span class="material-symbols-outlined">calendar_today</span>
                        </div>
                        <span class="action-label">Event</span>
                    </button>
                    <button class="action-item">
                        <div class="action-icon-bg article">
                            <span class="material-symbols-outlined">article</span>
                        </div>
                        <span class="action-label">Article</span>
                    </button>
                </div>
            </div>

            <!-- Posts List -->
            <div class="post-list">
                <div class="empty-state" *ngIf="!isLoading && posts.length === 0"
                    style="text-align: center; padding: 2rem; color: var(--text-secondary);">
                    No posts yet. Be the first to share something!
                </div>

                <app-post-card *ngFor="let post of posts" [post]="post"></app-post-card>

                <!-- Load More -->
                <div class="pagination-footer" *ngIf="posts.length >= 10" style="text-align: center; padding: 2rem;">
                    <button class="btn-load-more-premium" (click)="loadMore()" [disabled]="!isMoreAvailable()"
                        style="padding: 0.75rem 2rem; border-radius: 1rem; background: var(--primary); color: white; font-weight: 700; border: none; cursor: pointer; box-shadow: 0 4px 12px rgba(19, 19, 236, 0.2);">
                        {{ isMoreAvailable() ? 'Load More Articles' : 'No More Articles' }}
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar (Suggestions) -->
        <app-right-sidebar class="sidebar"></app-right-sidebar>
    </div>
</div>