<div class="report-modal-overlay" aria-modal="true" role="dialog">
    <div class="report-modal-backdrop" (click)="close()"></div>

    <div class="report-modal-container" (click)="$event.stopPropagation()">
        <header class="report-modal-header">
            <h2 class="report-modal-title">Report Content</h2>
            <button class="report-close-btn" (click)="close()" aria-label="Close">
                <span class="material-symbols-outlined">close</span>
            </button>
        </header>

        <div class="report-modal-body">
            <!-- Target User Section -->
            <div class="report-target-card" *ngIf="user">
                <div class="report-target-avatar-wrapper">
                    <div class="report-target-avatar"
                        [style.background-image]="'url(' + (user.avatar || 'assets/default-avatar.png') + ')'">
                    </div>
                    <div class="report-target-badge">
                        <span class="material-symbols-outlined">warning</span>
                    </div>
                </div>
                <div class="report-target-info">
                    <span class="report-target-label">Reporting User</span>
                    <span class="report-target-name">{{ user.name }}</span>
                    <span class="report-target-handle">{{ user.handle }}</span>
                </div>
            </div>

            <p class="report-instruction">Help us understand what's happening. Why are you reporting this user?</p>

            <!-- Reason Selection -->
            <div class="report-reasons-group">
                <label *ngFor="let reason of reasons" class="report-reason-item"
                    [class.is-selected]="selectedReason === reason">
                    <div class="reason-indicator">
                        <div class="indicator-inner"></div>
                    </div>
                    <div class="reason-content">
                        <span class="reason-text">{{ reason }}</span>
                    </div>
                    <input type="radio" name="report_reason" [value]="reason" [(ngModel)]="selectedReason"
                        class="reason-input-hidden">
                </label>
            </div>

            <!-- Additional Context -->
            <div class="report-details-section">
                <label class="report-details-label">
                    Additional Details
                    <span class="label-optional">(Optional)</span>
                </label>
                <textarea [(ngModel)]="details" name="details" class="report-details-textarea"
                    placeholder="Please provide any additional information that might help our moderation team..."></textarea>
            </div>
        </div>

        <footer class="report-modal-footer">
            <button class="report-btn-secondary" (click)="close()">Cancel</button>
            <button class="report-btn-primary" [disabled]="isSubmitting || !selectedReason" (click)="submitReport()">
                <span *ngIf="!isSubmitting">Submit Report</span>
                <span *ngIf="isSubmitting">Sending...</span>
                <span class="material-symbols-outlined" *ngIf="!isSubmitting">send</span>
                <div class="report-spinner" *ngIf="isSubmitting"></div>
            </button>
        </footer>
    </div>
</div>